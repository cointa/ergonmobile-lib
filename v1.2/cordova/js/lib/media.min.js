app.media={},app.media.getCameraPath=filePath=>("Android"===device.platform&&"file:///"!=filePath.substring(0,8)&&(filePath="file://"+filePath),filePath),app.media.getCapturePath=file=>{let path=file.fullPath;return"iOS"===device.platform&&(path="file://"+file.fullPath),path},app.media.getImage=(onSuccess,onFail)=>{let imageOptions={quality:app.config.image.quality,destinationType:Camera.DestinationType.FILE_URI,sourceType:"camera"===app.config.image.source?Camera.PictureSourceType.CAMERA:"gallery"===app.config.image.source?Camera.PictureSourceType.PHOTOLIBRARY:"",targetWidth:app.config.image.pxlimit,targetHeight:app.config.image.pxlimit,encodingType:"jpeg"===app.config.image.type?Camera.EncodingType.JPEG:"png"===app.config.image.type?Camera.EncodingType.PNG:""};navigator.camera.getPicture(filePath=>onSuccess(app.media.getCameraPath(filePath)),err=>onFail(err),imageOptions)},app.media.getVideo=(onSuccess,onFail)=>{if("camera"===app.config.video.source)app.media.videoCapture(filePath=>onSuccess(filePath),err=>onFail(err));else if("gallery"===app.config.video.source){let options={quality:100,destinationType:Camera.DestinationType.DATA_URL,sourceType:Camera.PictureSourceType.PHOTOLIBRARY,mediaType:Camera.MediaType.VIDEO};navigator.camera.getPicture(filePath=>onSuccess(app.media.getCameraPath(filePath)),err=>onFail(err),options)}},app.media.videoCapture=(onSuccess,onFail)=>{let options={limit:1,duration:app.config.video.duration};navigator.device.capture.captureVideo(files=>onSuccess(app.media.getCapturePath(files[0])),err=>onFail(err),options)},app.media.getAudio=(onSuccess,onFail)=>{let options={limit:1,duration:app.config.audio.duration};navigator.device.capture.captureAudio(files=>onSuccess(app.media.getCapturePath(files[0])),err=>{onFail(err),err.includes("act=android.provider.MediaStore.RECORD_SOUND")&&window.open("market://details?id=fr.nope.soundrecorder")},options)},app.media.getGallery=(onSuccess,onFail)=>{let options={quality:100,destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.PHOTOLIBRARY,mediaType:Camera.MediaType.ALLMEDIA};navigator.camera.getPicture(filePath=>onSuccess(app.media.getCameraPath(filePath)),err=>onFail(err),options)};